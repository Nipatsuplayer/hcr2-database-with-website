<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>
    (function(){
        try {
            var xhr = new XMLHttpRequest();
            xhr.open('GET', '/php/maintenance_status.php', false); // synchronous to block render briefly
            xhr.setRequestHeader('Accept', 'application/json');
            xhr.send(null);
            if (xhr.status === 200) {
                try {
                    var info = JSON.parse(xhr.responseText || '{}');
                    if (info.maintenance && !info.allowed) {
                        window.location.replace('/maintenance.html');
                    }
                } catch (e) {}
            }
        } catch (e) {}
    })();
    </script>
    <link rel="stylesheet" href="css/style.css">
    <title>HCR2 Database</title>
    <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png">
    <link rel="manifest" href="img/site.webmanifest">
    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
</head>
<body>
    <!-- maintenance check moved to head for faster redirect -->
    <header>
        <div class="device-note" id="device-note">üíª Works best on laptop / PC for full functionality</div>
        <div class="header-inner">
            <div class="branding">
                <img src="img/hcrdatabaselogo.png" alt="Logo" id="logo">
                <div>
                    <h1>HCR2 Adventure Records (unofficial)</h1>
                    <div style="font-size:16px; opacity:0.9;">Community world records & stats</div>
                </div>
            </div>

            <!-- Mobile menu toggle button (visible on small screens) -->
            <button id="mobile-menu-btn" class="mobile-menu-btn" aria-expanded="false" aria-controls="mobile-menu" onclick="toggleMobileMenu()">
                <span class="sr-only">Open menu</span>
                ‚ò∞
            </button>

            <!-- header-right is now the togglable mobile menu -->
            <nav id="mobile-menu" class="header-right" aria-hidden="true">
                <div class="header-buttons" aria-hidden="false">
                    <button onclick="fetchData('maps')">Get Maps</button>
                    <button onclick="fetchData('vehicles')">Get Vehicles</button>
                    <button onclick="fetchData('players')">Get Players</button>
                    <button onclick="fetchData('records')">Get Records</button>
                    <button onclick="fetchStats()">Stats</button>
                    <button onclick="togglePublicSubmitForm()">Submit Record</button>
                    <button onclick="toggleNewsModal()">News</button>

                    <button id="login-btn" class="discord-btn" onclick="location.href='auth/discord_login.php'">
                        <img class="discord-logo" src="img/Discord-Symbol-Blurple.png" alt="Discord">
                        <span>Sign in with Discord</span>
                    </button>

                    <button id="admin-btn" style="display:none;">Admin</button>
                    <button id="logout-btn" onclick="location.href='auth/logout.php'" style="display:none;">Logout</button>
                </div>
            </nav>
        </div>

        <div id="auth-warning" style="color:orange; padding:8px 0; text-align:center;"></div>
    </header>

    <main>
        <div id="stats-container"></div>
        <div id="data-container"></div>
    
        <div class="about-section" id="about-section">

            <img src="img/image copy.png" alt="Info Icon" style="height: 200px; vertical-align: middle; margin-bottom: 10px;">

            <h2>About this website ‚ÑπÔ∏è</h2>
            <p id="about-text" style="max-width: 800px; margin: 0 auto; font-size: 16px; line-height: 1.5;">
                Welcome to the unofficial Hill Climb Racing 2 Adventure Records page ! Here, players from around the world can view the best distance records achieved in various maps using different vehicles. Our goal is to create a comprehensive leaderboard that showcases the skills and achievements of the HCR2 community, which includes every record from leaderboards as well as challenge runs.
            </p>
            <h2>Record Guidelines üìù</h2>
            <p id="rules-text">
                <ul style="list-style-type: disc; padding-left: 20px; line-height: 1.5; max-width: 800px; margin: 0 auto; font-size: 16px;">
                    <li>We will be including records from the official Adventure leaderboards, but runs from Adventure challenges will also be accepted.</li>
                    <li>No records using patched glitches or vehicles before nerfs (eg : Eco-Thrust Bug Moonlander, Pre-nerf Minibus) will be added here, for the sake of consistency.</li>
                    <li>Obviously, no records using respawns will be added, as they offer an unfair advantage.</li>
                    <li>In case of a tie, the first player to achieve the record distance will be considered the World Record Holder.</li>
                    <li>Admins will review all submissions and may remove records if they are found to be invalid or in violation of these rules.</li>
                </ul>
            </p>
            <h2>Viewing Records üèÜ</h2>
            <p id="viewing-text" style="max-width: 800px; margin: 0 auto; font-size: 16px; line-height: 1.5;">
                To view records, go to  the "Get Records" section. The records will be displayed in a table format, showing the map name, vehicle name, player name, and the distance achieved. Select a map / vehicle of your choice from the checkboxes to filter the records by map and / or vehicle, enter a specific distance value to filter records that are lower or higher than the specified value, or type in a specific player name to search for their records. You can also sort the records by distance to see the highest or lowest records first.
            </p>
            <h2>Submitting Records ‚úçÔ∏è</h2>
            <p id="viewing-text-2" style="max-width: 800px; margin: 0 auto; font-size: 16px; line-height: 1.5;">
                To submit a record, click on the "Submit Record" button. Fill out the form with the required information, including the map name, vehicle name, distance achieved, player name, and country (optional). Once you submit the form, the record will be sent for admin review. If approved, it will be added to the database and displayed in the records section.
            </p>
            <h2>Statistics üìä</h2>
            <p id="stats-text" style="max-width: 800px; margin: 0 auto; font-size: 16px; line-height: 1.5;">
                Our stats section provides detailed insights into the performance of vehicles, maps, and players in the HCR2 community. You can explore various statistics such as the number of records held by top players, the vehicles with the highest total distance, and the distribution of records across different maps.
            </p>
            <h2>News & Updates üì∞</h2>
            <p id="news-text" style="max-width: 800px; margin: 0 auto; font-size: 16px; line-height: 1.5;">
                Stay informed about the latest news and updates related to this website. Our news section provides information on recent updates, changes to the database, and other relevant announcements.
            </p>
            <h2>Follow Us üì¢</h2>
            <p id="follow-text" style=
            "max-width: 800px; margin: 0 auto; font-size: 16px; line-height: 1.5;">
                <ul>
                    <p class = "social-link"><a rel="noopener noreferrer" href="https://www.youtube.com/@titaniumhcr2" target="_blank">Titanium Gaming HCR2</a></p>
                    <p class = "social-link"><a rel="noopener noreferrer" href="https://www.youtube.com/@nipatsu" target="_blank">Nipatsu HCR2</a></p>
                </ul>
        </div>
        
        <!-- Public submission modal (hidden overlay) -->
        <div id="public-submit-overlay" class="modal-overlay" style="display:none;">
            <div class="modal-panel form-container" role="dialog" aria-modal="true" aria-labelledby="public-submit-title">
                <button class="modal-close" onclick="togglePublicSubmitForm()" aria-label="Close">‚úï</button>
                <h2 id="public-submit-title">Submit a Record (for admin review)</h2>
                <form id="public-submit-form" onsubmit="submitPublicRecord(event)">
                    <!-- Hidden timestamp field to detect bots that submit too quickly -->
                    <input type="hidden" id="form-load-time" value="">
                    <label>Map</label>
                    <select id="public-map-select" required></select>
                    <label>Vehicle</label>
                    <select id="public-vehicle-select" required></select>
                    <label>Distance</label>
                    <input type="number" id="public-distance-input" required min="1">
                    <label>Player name</label>
                    <input type="text" id="public-player-name" required>
                    <label>Country (optional)</label>
                    <input type="text" id="public-player-country">
                    <!-- hCaptcha verification -->
                    <div id="hcaptcha-widget" data-sitekey="" required></div>
                    <input type="hidden" id="h-captcha-response" name="h_captcha_response">
                    <!-- Multiple honeypot fields to catch bots (should all remain empty) -->
                    <div style="position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden;">
                        <label for="hp_email">Email (honeypot)</label>
                        <input type="email" id="hp_email" name="hp_email" autocomplete="off" tabindex="-1" aria-hidden="true">
                        <label for="hp_website">Website (honeypot)</label>
                        <input type="url" id="hp_website" name="hp_website" autocomplete="off" tabindex="-1" aria-hidden="true">
                        <label for="hp_phone">Phone (honeypot)</label>
                        <input type="tel" id="hp_phone" name="hp_phone" autocomplete="off" tabindex="-1" aria-hidden="true">
                        <label for="hp_comments">Comments (honeypot)</label>
                        <textarea id="hp_comments" name="hp_comments" autocomplete="off" tabindex="-1" aria-hidden="true"></textarea>
                    </div>
                    <div class="actions">
                        <button type="submit">Send Submission</button>
                        <button type="button" onclick="togglePublicSubmitForm()">Cancel</button>
                    </div>
                </form>
                <p id="public-submit-message" style="margin-top:10px;"></p>
            </div>
        </div>
        <!-- News modal -->
        <div id="news-overlay" class="modal-overlay" style="display:none;">
            <div class="modal-panel form-container" role="dialog" aria-modal="true" aria-labelledby="news-title">
                <button class="modal-close" onclick="toggleNewsModal()" aria-label="Close">‚úï</button>
                <h2 id="news-title">Recent News</h2>
                <div id="news-list" style="max-height:60vh; overflow:auto; text-align:left;">
                    <p>Loading news...</p>
                </div>
                <div style="text-align:right; margin-top:12px;"><button onclick="toggleNewsModal()" style="background:#ccc;color:#000;">Close</button></div>
            </div>
        </div>
        <footer id="footer">
            <p id="copyright" style="text-align: center; margin-top: 24px; font-size: 14px; color: #777;">
                2026 - Adventure Records - Made by : Titanium Gaming HCR2 / Nipatsu HCR2<br>
                Portions of the materials used are trademarks and/or copyrighted works of Fingersoft Ltd. All rights reserved by Fingersoft. This material is not official and is not endorsed by Fingersoft.
            </p>
            <p class="github-meta" style="margin-top:8px; font-size:13px; color:#555;">
                Source code: <a id="github-link" href="https://github.com/Nipatsuplayer/hcr2-database-with-website" target="_blank" rel="noopener noreferrer">GitHub</a>
                &nbsp;‚Äî&nbsp;Version: <span id="github-version">loading...</span>
                &nbsp;‚Äî&nbsp;<a href="privacy.html" id="privacy-link">Privacy Policy</a>
            </p>
        </footer>
    </main>
<script src="js/script.js"></script>
</body>
</html>